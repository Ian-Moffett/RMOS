#include "../GDT.h"


__attribute__((aligned(0x1000))) gdt_t gdt = {
    {0x0, 0x0, 0x0, 0x0, 0x0},      // Null descriptor.
    {0x0, 0x0, 0x0, 0x9A, 0xA0},    // Kernel code.
    {0x0, 0x0, 0x0, 0x92, 0xA0},    // Kernel data.
    {0x0, 0x0, 0x0, 0x9A, 0xA0},    // User code.
    {0x0, 0x0, 0x0, 0x92, 0xA0}     // User data.
};

void load_gdt();


void gdt_install() {
    static gdtr_t gdtr = {
        .limit = sizeof(gdt) - 1,
        .base = (uint64_t)&gdt
    };

    load_gdt(&gdtr);
}
